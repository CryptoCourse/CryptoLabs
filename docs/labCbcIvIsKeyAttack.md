Зачем использовать случайный IV, когда ключ тоже случайный? Логично использовать IV как ключ, 
ведь тогда противник не узнает IV, и его не надо будет передавать, так как обе стороны будут знать ключ! Следовательно никаких 
атак по известному IV, да и размер зашифрованных сообщений стал меньше.

Гениально! Что может пойти не так?

![img](https://software.intel.com/sites/default/files/race.jpg)

## Задание

Дана REST служба с API указанным ниже. Аналог службы из реальной жизни - служба, в которой для аутентификации пользователй 
используются зашифрованные токены (cookie). 

Токены получаются из имени пользователя по известному детерминированному алгоритму 
(эмулируется методом `GET <host>/api/IvIsKey/{userId}/{challengeId}/User/Token/`). 

Токены администраторов
получаются по другому известному алгоритму (эмулируется методом `GET <host>/api/IvIsKey/{userId}/{challengeId}/Admin/Token/`). 
После получения токенов они зашифровываются на симметричном ключе в режиме CBC с 
IV = key. Зашифрованный токен передаётся пользователю. 

Используя зашифрованный токен пользователь может аутентифицироваться
через метод `GET <host>/api/IvIsKey/{userId}/{challengeId}/authenticate/user/encryptedtoken={encryptedToken}`, передавая 
токен. Для аутентификации администраторов служит метод 
`GET <host>/api/IvIsKey/{userId}/{challengeId}/authenticate/admin/encryptedtoken={encryptedToken}`.

Задача - получить от метода `GET <host>/api/IvIsKey/{userId}/{challengeId}/authenticate/admin/encryptedtoken={encryptedToken}` 
строку Wellcome to secterNet!, т.е. успешно пройти аутентификацию как администратор.

**ВАЖНО!** Все строки кодируется с использование кодировки ASCII.

## Ход работы.

### Тестирование 

`<userId>` = имя аккаунта на GitHub  (или фамилия студента)

`<challengeId>` = 1

1. Проверить работоспособность контроллера с помощью метода `GET <host>/api/IvIsTime`
2. Используя методы API, собственный код и помощь тёмных богов получить зашифрованный токен администратора.
3. Аутентифицироваться как администратор используя метод 
`GET <host>/api/IvIsTime/{userId}/{challengeId}/authenticate/admin/encryptedtoken={encryptedToken}`

### Сдача лабы
шаги 1 - 3 этапа тестирования аналогично для 20 различных `<challengeId>`.

## Описание API

Rest запросы, в заголовке выстален Content-Type: application/json; charset=utf-8.

### Описание методов

## `GET <host>/api/IvIsKey`

Проверка работоспособности контроллера. Возращает `operating`. Ответ не кодируется в BASE64.

| Парметр| Описание| 
| --- | --- 
| `<host>` | имя хоста веб службы

## `GET <host>/api/IvIsKey/{userId}/{challengeId}/User/Token/`

Возвращает сырой (незашифрованный) токен для пользователя в виде строки. Ответ не кодируется в BASE64.

| Парметр| Описание| 
| --- | --- 
| `<host>` | имя хоста веб службы
| `<userId>` | идентификатор студента
| `<challengeId>` | идентификатор задания

## `GET <host>/api/IvIsKey/{userId}/{challengeId}/Admin/Token/`

Возвращает сырой (незашифрованный) токен для администратора в виде строки. Ответ не кодируется в BASE64.

| Парметр| Описание| 
| --- | --- 
| `<host>` | имя хоста веб службы
| `<userId>` | идентификатор студента
| `<challengeId>` | идентификатор задания

## `GET <host>/api/IvIsKey/{userId}/{challengeId}/User/encryptedToken/hex`

Возвращает зашифрованный токен для пользователя в виде hex строки. Может быть использован для аутентификации в 
методе `GET <host>/api/IvIsKey/{userId}/{challengeId}/authenticate/user/encryptedtoken={encryptedToken}`. 
Ответ не кодируется в BASE64.

| Парметр| Описание| 
| --- | --- 
| `<host>` | имя хоста веб службы
| `<userId>` | идентификатор студента
| `<challengeId>` | идентификатор задания

## `GET <host>/api/IvIsKey/{userId}/{challengeId}/authenticate/user/encryptedtoken={encryptedToken}`

Аутентифицирует пользователя по зашифрованному токену. В случае некорретности токена возвращает ошибку. 
Ответ не кодируется в BASE64.

| Парметр| Описание| 
| --- | --- 
| `<host>` | имя хоста веб службы
| `<userId>` | идентификатор студента
| `<challengeId>` | идентификатор задания
| `<encryptedToken>` | hex строка, представляющая зашифрованный токен

## `GET <host>/api/IvIsKey/{userId}/{challengeId}/authenticate/admin/encryptedtoken={encryptedToken}`

Аутентифицирует администротора по зашифрованному токену. В случае некорретности токена возвращает ошибку. 
Ответ не кодируется в BASE64.

| Парметр| Описание| 
| --- | --- 
| `<host>` | имя хоста веб службы
| `<userId>` | идентификатор студента
| `<challengeId>` | идентификатор задания
| `<encryptedToken>` | hex строка, представляющая зашифрованный токен
